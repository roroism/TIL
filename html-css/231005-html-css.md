# TODAY I LEARNED

## Learned

### 덜컥덜컥 누적 배치 변경 문제

- Cumulative Layout Shift (누적 배치 변경)
- LCP가 성능을 측정하는 대표적인 지표였다면, CLS는 사용자 경험을 측정하는 대표적인 지표이다.
- CLS를 0.1 안으로 단축하는 것이 우리의 목표다.
- 구글 라이트 룸을 이용하여 측정할 수 있다.

#### 누적 배치 변경 문제(CLS)의 예시

1. 뒤늦게 요소가 추가되면서 전체 페이지가 아래로 떨어지는 현상.
2. 글꼴 스와핑 (FOIT / FOUT)
- 텍스트가 보이지 않다가 갑자기 보이는 것 (FOIT)
- 스타일되지 않은 글꼴(system 글꼴)이 표시가 됐다가 갑자기 웹 폰트 글꼴이 뒤늦게 로딩이 되는 현상(FOUT)

#### CLS 유발 요인

- 첫 페인팅 이후 뷰포트 안에서 배치가 바뀌는 상황
1. 치수를 알 수 없는 이미지 로딩.
2. 동적으로 추가된 DOM.
3. 웹 폰트 swap 페인팅.

#### CLS 확인(Lighthouse)

#### CLS 문제 해결 사례

- 자리표시자를 활용하여 CLS 문제를 효과적으로 억제한 사례 -> 이미지가 들어올 영역에 자리표시자를 미리 넣어서, 이미지가 들어오지 않더라도 그 영역을 다른 요소들이 침범하지 않게 처리.

#### CLS를 구체적으로 확인하는 방법

- 개발자 도구의 performance 탭 -> Experience -> Summary -> CLS를 유발하는 영역이 어디인지 확인할 수 있다.

#### CLS 문제 해결

1. 동적으로 추가하는 콘텐츠에 자리 표시자 제공.
2. 이미지/영상 요소에 비율 힌트 제공. (이미지에 width와 height 값을 넣어준다. 영상에는 비율 유지가 되도록 미리 자리를 잡아 둔다.)
3. 애니메이션 적용 시 transform 사용. (width, height 값이 변경되지 않도록 만든다.)

